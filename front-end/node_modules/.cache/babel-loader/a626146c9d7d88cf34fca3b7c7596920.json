{"ast":null,"code":"var _jsxFileName = \"/home/igor/Documentos/Projetos Driven/projeto15-boardcamp/front-end/src/components/RentalsTable.js\",\n    _s = $RefreshSig$();\n\nimport { useHistory } from 'react-router-dom';\nimport { FaHandHolding, FaTrash } from 'react-icons/fa';\nimport dayjs from 'dayjs';\nimport Table from './Table';\nimport Button from './Button';\nimport * as api from '../services/api/rentals';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RentalsTable(_ref) {\n  _s();\n\n  let {\n    rentals,\n    onAction,\n    ...props\n  } = _ref;\n  const history = useHistory();\n\n  function destroyRental(rentalId) {\n    api.destroy(rentalId).then(() => {\n      onAction();\n    }).catch(err => {\n      console.error(err);\n      alert('Não foi possível excluir aluguel!');\n    });\n  }\n\n  function returnRental(rentalId) {\n    api.returnRental(rentalId).then(() => {\n      onAction();\n    }).catch(err => {\n      console.error(err);\n      alert('Não foi possível devolver aluguel!');\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Table, {\n    columns: [{\n      title: 'Jogo',\n      accessor: 'game.name'\n    }, {\n      title: 'Cliente',\n      accessor: 'customer.name'\n    }, {\n      title: 'Data do Aluguel',\n      accessor: 'rentDate'\n    }, {\n      title: 'Dias Alugados',\n      accessor: 'daysRented'\n    }, {\n      title: 'Devolvido em',\n      accessor: 'returnDate'\n    }, {\n      title: 'Valor',\n      accessor: 'originalPrice'\n    }],\n    content: rentals,\n    onCellClick: {\n      'customer.name': row => history.push(`/customers/${row.customer.id}`)\n    },\n    formatCellText: {\n      rentDate: text => dayjs(text).format('DD/MM/YYYY'),\n      returnDate: text => text ? dayjs(text).format('DD/MM/YYYY') : 'Não devolvido',\n      originalPrice: (price, row) => `R$ ${((price + row.delayFee) / 100).toFixed(2).replace('.', ',')}`\n    },\n    cellStyle: {\n      returnDate: (date, row) => (date && dayjs(date).isAfter(dayjs(row.rentDate).add(row.daysRented, 'days')) || !date && dayjs().isAfter(dayjs(row.rentDate).add(row.daysRented, 'days'))) && {\n        color: '#FF0000',\n        fontWeight: 'bold'\n      }\n    },\n    actions: [{\n      title: 'Excluir',\n      onClick: rental => destroyRental(rental.id),\n      component: /*#__PURE__*/_jsxDEV(Button, {\n        background: \"#FA1249\",\n        children: /*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 116\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 87\n      }, this)\n    }, {\n      title: 'Devolver',\n      onClick: rental => returnRental(rental.id),\n      component: /*#__PURE__*/_jsxDEV(Button, {\n        background: \"rgb(53,121,220)\",\n        children: /*#__PURE__*/_jsxDEV(FaHandHolding, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 124\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 87\n      }, this)\n    }],\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n}\n\n_s(RentalsTable, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n  return [useHistory];\n});\n\n_c = RentalsTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"RentalsTable\");","map":{"version":3,"names":["useHistory","FaHandHolding","FaTrash","dayjs","Table","Button","api","RentalsTable","rentals","onAction","props","history","destroyRental","rentalId","destroy","then","catch","err","console","error","alert","returnRental","title","accessor","row","push","customer","id","rentDate","text","format","returnDate","originalPrice","price","delayFee","toFixed","replace","date","isAfter","add","daysRented","color","fontWeight","onClick","rental","component"],"sources":["/home/igor/Documentos/Projetos Driven/projeto15-boardcamp/front-end/src/components/RentalsTable.js"],"sourcesContent":["import { useHistory } from 'react-router-dom';\nimport { FaHandHolding, FaTrash } from 'react-icons/fa';\nimport dayjs from 'dayjs';\n\nimport Table from './Table';\nimport Button from './Button';\n\nimport * as api from '../services/api/rentals';\n\nexport default function RentalsTable ({ rentals, onAction, ...props }) {\n  const history = useHistory();\n\n  function destroyRental (rentalId) {\n    api.destroy(rentalId).then(() => {\n      onAction();\n    }).catch(err => {\n      console.error(err);\n      alert('Não foi possível excluir aluguel!');\n    });\n  }\n\n  function returnRental (rentalId) {\n    api.returnRental(rentalId).then(() => {\n      onAction();\n    }).catch(err => {\n      console.error(err);\n      alert('Não foi possível devolver aluguel!');\n    });\n  }\n\n  return (\n    <Table\n        columns={[\n          { title: 'Jogo', accessor: 'game.name' },\n          { title: 'Cliente', accessor: 'customer.name' },\n          { title: 'Data do Aluguel', accessor: 'rentDate' },\n          { title: 'Dias Alugados', accessor: 'daysRented' },\n          { title: 'Devolvido em', accessor: 'returnDate' },\n          { title: 'Valor', accessor: 'originalPrice' }\n        ]}\n\n        content={rentals}\n\n        onCellClick={{\n          'customer.name': row => history.push(`/customers/${row.customer.id}`)\n        }}\n\n        formatCellText={{\n          rentDate: text => dayjs(text).format('DD/MM/YYYY'),\n          returnDate: text => text ? dayjs(text).format('DD/MM/YYYY') : 'Não devolvido',\n          originalPrice: (price, row) => `R$ ${((price + row.delayFee) / 100).toFixed(2).replace('.', ',')}`\n        }}\n\n        cellStyle={{\n          returnDate: (date, row) => \n            (\n              (date && dayjs(date).isAfter(dayjs(row.rentDate).add(row.daysRented, 'days'))) ||\n              (!date && dayjs().isAfter(dayjs(row.rentDate).add(row.daysRented, 'days')))\n            ) && { color: '#FF0000', fontWeight: 'bold' }\n        }}\n\n        actions={[\n          { title: 'Excluir', onClick: rental => destroyRental(rental.id), component: <Button background=\"#FA1249\"><FaTrash /></Button> },\n          { title: 'Devolver', onClick: rental => returnRental(rental.id), component: <Button background=\"rgb(53,121,220)\"><FaHandHolding /></Button> }\n        ]}\n\n        {...props}\n      />\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}